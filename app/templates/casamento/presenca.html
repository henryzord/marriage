{% extends "casamento/master.html" %}

{% load static %}

{% block title %}
    J&H · Confirmar Presença
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row"> <!-- linha de cima -->
        <div class="col-12 col-xl-3"> <!-- padding para xl. não aparece no pequeno -->
        </div>
        <div class="col-12 col-xl-6">
            <div class="row align-items-center">
                <div class="col-4 d-block d-xl-none"> <!-- padding para pequeno. não aparece no xl -->
                </div>
                <div class="col-4 col-xl-3">  <!-- cachorrinho -->
                    <div class="d-flex justify-content-center">
                        <img
                                alt="um cachorro humanizado com um convite na mão"
                                src="{% static 'img/icons/confirmacao.webp' %}"
                                class="img-fluid"
                        >
                    </div>
                </div>
                <div class="col-4 d-block d-xl-none"> <!-- padding para pequeno. não aparece no xl -->
                </div>
                <div class="col-12 col-xl-9">
                    <div class="row">
                        <div class="col">
                            <h1 class="text-center text-xl-start subtitulo cor-principal-escura">Confirmar Presença</h1>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <p class="texto cor-principal">
                                O evento já passou! Mas você pode conferir como era o formulário de submissão nesta 
                                página.
                                <br/><br/>
                                Para confirmar sua presença, por favor, preencha o formulário abaixo, que enviará uma
                                mensagem pelo WhatsApp.
                            </p>
                            <p class="texto cor-principal">Favor confirmar até <b>31/03/2024.</b></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-xl-3">
            </div>
        </div>
    </div>
    <div class="row"> <!-- linha de baixo -->
        <div class="col-12 col-xl-3">
        </div>
        <div class="col-12 col-xl-6">
            <form class="row g-2" onsubmit="return false;">
                <div class="col-12 col-xl-6 texto cor-principal">
                    <label for="inputNome" class="form-label">Nome e Sobrenome</label>
                    <input type="text" class="form-control" id="inputNome" placeholder="João da Silva">
                </div>
                <div class="col-12 col-xl-6 texto cor-principal">
                    <label for="inputTelefone" class="form-label">Telefone</label>
                    <input type="text" class="form-control" id="inputTelefone" placeholder="(55) 999 999 999">
                </div>
                <div class="col-12 texto cor-principal">
                    <label for="inputAcompanhantes" class="form-label">
                        Incluindo você, para quantas pessoas você está confirmando presença?
                    </label>
                    <input type="number" class="form-control" id="inputPessoas" aria-describedby="helpConfirmacao">
                    <div id="helpConfirmacao" class="form-text">Se a confirmação é apenas para você, escreva 1 (uma
                        pessoa)
                    </div>
                </div>
                <div class="col-12 texto cor-principal">
                    <label for="inputCriancas" class="form-label">Das pessoas que você está confirmando presença,
                        quantas são crianças de 7 anos ou menos?</label>
                    <input type="number" class="form-control" id="inputCriancas" aria-describedby="helpCriancas">
                    <div id="helpCriancas" class="form-text">Se não houver nenhuma criança na sua confirmação,
                        escreva 0 (nenhuma)
                    </div>
                </div>
                <div class="col-auto">
                    <button id="buttonConfirmar" type="submit" class="btn btn-golden">Confirmar presença</button>
                </div>
            </form>
        </div>
        <div class="col-12 col-xl-3">  <!-- padding para xl. não aparece no pequeno -->
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
    <script type="application/javascript">
        function generateLink() {
            let nome = document.getElementById('inputNome').value;
            let telefone = document.getElementById('inputTelefone').value;
            let pessoas = document.getElementById('inputPessoas').value;
            let criancas = document.getElementById('inputCriancas').value;

            let message = 'Olá! Estou confirmando minha presença no casamento da Juliana e do Henry.%0A%0A' +
                '*Nome:* ' + nome + "%0A*Telefone:* " + telefone + "%0A*Número de pessoas:* " + pessoas + '%0A*Crianças de 7 anos ou menos:* ' + criancas;

            let url = 'https://wa.me/' + telefone + '?text=' + message;
            window.open(url);
        }

        document.getElementById('buttonConfirmar').addEventListener('click', generateLink);

    </script>
{% endblock %}